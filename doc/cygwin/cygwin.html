<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
  <head>
    <title>Notes on Cygwin Support</title>
  </head>

  <body>
    <h1>Notes on Cygwin Support</h1>

<p>The Opal compiler has been ported to the <a
	href="http://cygwin.com"> Cygwin environment</a>, which provides a 
	Unix-like GNU-based environment for Windows 9x/ME/NT/2000 operating
	system. Due to some differences/limitations/restrictions the support 
	is not complete. The configuration program has been changed
	accordingly, so that the default installation will only consist of
      the unproblematic parts.</p>

<h3> Case Insensitivity of Filenames </h3>

<p>Filenames are not case sensitive in the Cygwin environment. They are under
    most (all ?) other Unix-like systems, and the Opal library uses
    different cases to distinguish structures. During the port, we found the 
    following problems:</p>
<ul>
<li> The internally generated C header file for structure <tt>S</tt> is
	confused with a C library header file <tt>s.h</tt>. This concerns
	structures <tt>Time, Wait, Signal, Tcl, Tk, Readline</tt>.
<li> Two library structures are distinguished by case only. This concerns
	the pairs <tt>BOOL/Bool, DENOTATION/Denotation, REFLECTION/Reflection</tt>. 
</ul>

<p>In order to keep changes to the source code to a minimum, we decided to
      break the strong connection between filenames and structure names for
      the structures concerned. The Opal compiler and the <tt>genmake</tt>
      program "know" which structures reside in renamed file names, and the
      configuration script renames the files accordingly. </p>

<p> The <i>Dosfop</i> system for building documentation has not been updated 
      and is <em>not</em> able to handle structures the names of which do
      not match their respective filenames. So you cannot generate the OCS
      documentation under Cygwin, instead you must install the documentation 
      separately.</p>

<p><i>Note for developers:</i> The <tt>SysDefs</tt> files and if present,
      the <tt>.hc.{c,h}</tt> files, have to be changed to take a possible renaming
      of filenames into account. See <tt>SysDefs</tt> and <tt>Wait.hc.c</tt> 
      in subsystem <tt>src/lib/System/Unix</tt> for an example. If the files 
      of further structures need to be renamed, the functions in
      <tt>src/om/genmake/Genmake.impl</tt> and
      <tt>src/oc/shared/admin/OcOptions.impl</tt> have to be changed
      accordingly, and you probably have to augment the code in
      <tt>configure.in</tt> as well. </p>

<h3> Handling of Libraries </h3>

<p>Handling of libraries is different for Cygwin systems. The following
      problems still persist:</p>
<ul>
<li> Linking external libraries does not work for the readline, tcl and tk
	libraries. This means that neither the Opal libraries that embed these C
	libraries can be used, nor the libraries and programs that build
	upon them, such as OpalWin, Oasys, and the Proofchecker.
<li> Building and using dynamic libraries is different for Windows' DLLs and 
	Unix' shared objects. The scripts have not been updated. Opal
	libraries and programs that depend on dynamic linking cannot be
	used. This concerns Oasys and the Proofchecker.
</ul>


    <hr>
    <address><a href="mailto:kd@cs.tu-berlin.de">Klaus Didrich</a></address>
<!-- Created: Tue Jun  5 10:21:45 MEST 2001 -->
<!-- hhmts start -->
Last modified: Tue Jun  5 12:33:59 MEST 2001
<!-- hhmts end -->
  </body>
</html>
