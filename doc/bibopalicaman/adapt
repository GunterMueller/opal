#!/usr/local/bin/perl

# This script changes absolute path names as still required by dosfop
# define the variables below and start the script

$oldManualRoot = "/home/opaladm/ocs/doc/bibopalicaman";
$newManualRoot = "/home/uebb/kd/doc/bibopalicaman";

@configFilesMan = ("config", "Toplevel.config");

$oldLibRoot = "/home/opaladm/ocs/src/lib";
$newLibRoot = "/home/uebb/kd/ocs/src/lib";

@configFilesLib = <*config>;

foreach $f (@configFilesMan) {
  open (INFILE, $f) or die "could not open $f";
  open (OUTFILE, ">$f.bak") or die "could not open $f.bak";
  while (<INFILE>) {
    s /$oldManualRoot/$newManualRoot/g;
    print OUTFILE
  }
  close INFILE;
  close OUTFILE;
  unlink $f;
  rename "$f.bak", "$f";
}

foreach $f (@configFilesLib) {
  open (INFILE, $f) or die "could not open $f";
  open (OUTFILE, ">$f.bak") or die "could not open $f.bak";
  while (<INFILE>) {
    s /$oldLibRoot/$newLibRoot/g;
    print OUTFILE
  }
  close INFILE;
  close OUTFILE;
  unlink $f;
  rename "$f.bak", "$f";
}
