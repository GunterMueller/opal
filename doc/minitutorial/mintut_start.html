<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
<head>
<title>The OCS/OASYS Mini-Tutorial</title>
</head>

<body bgcolor=FFFFFF>

<h3>Getting started with the <code>ocs</code> tool</h3>

The compilation of Opal sources is driven by a single, batch-oriented
command <code>ocs</code>, which is similar to the traditional Unix tool
<code>make</code>. <p>

For example, we compile the mandatory hello-world program
with <code>ocs</code> as follows:

<pre>
    $ cd examples/HelloWorld
    examples/HelloWorld $ ocs
->  Generating rules for hello'HelloWorld ...
->  Checking Signature of HelloWorld ...
->  Compiling Implementation of HelloWorld ...
->  Generating  object code for HelloWorld ...
->  Generating startup code for hello ...
->  Linking hello ...
    examples/HelloWorld $ ./hello
->  Hello World!
</pre>

Like <code>make</code>, <code>ocs</code> is ``lazy'' and
performs only the steps necessary to bring its target up to date. Thus,
calling <code>ocs</code> again yields:

<pre>
    examples/HelloWorld $ ocs
->  Nothing to be done for `all'.
</pre>

Only if sources change (reflected by their time stamps) will (partial)
recompilation be carried out:

<pre>
    examples/HelloWorld $ touch HelloWorld.impl
    examples/HelloWorld $ ocs
->  Generating rules for hello'HelloWorld ...
->  Compiling Implementation of HelloWorld ...
->  Generating  object code for HelloWorld ...
->  Generating startup code for hello ...
->  Linking hello ...
</pre>

<code>ocs</code> places intermediate compilation results in a
subdirectory called <code>OCS</code>. In order to enforce
recompilation, or to recover disk space, simply remove this directory:

<pre>
    examples/HelloWorld $ rm -rf OCS
    examples/HelloWorld $ ocs
->  Generating rules for hello'HelloWorld ...
    ...
->  Linking hello ...
</pre>

<blockquote><small>Sometimes <code>ocs</code> gets confused by
changes on the <code>SysDefs</code> file - for example, if structures
have been renamed. If the operation of <code>ocs</code> fails for
such reasons, removing <code>./OCS</code> helps.
</small></blockquote>


<code>ocs</code> gets its information from a file called
<code>SysDefs</code> (like <code>make</code> from
<code>Makefile</code>) in the current directory.  For the
hello-world program, this file has the following contents:

<pre>
    examples/HelloWorld $ cat SysDefs
->  TOPSTRUCT = HelloWorld
->  TOPCOM = hello
</pre>

A <code>SysDefs</code> file contains a set of variable definitions in
a <code>make</code>-like syntax. For hello-world, we only had to
define the following variables: <code>TOPSTRUCT</code>, the name of
the structure which contains the top-level monadic command, and
<code>TOPCOM</code>, the name of this command. <p>

<blockquote><small>Remark: by running 
<code>"ocs -top HelloWorld hello"</code>, 
a file <code>SysDefs.HelloWorld-hello</code> 
will be created which can be renamed <code>SysDefs</code>.
</small></blockquote>

A <code>SysDefs</code> file may contain further variable definitions,
and <code>ocs</code> runs in a variety of modes supporting diverse
options. For further documentation, see the 
<a href="ocs.html"><code>ocs(1)</code> manual page</a>. <p>

The operation of <code>ocs</code> may be further customized by a
<emph>project definitions file</emph>. If the environment variable
<code>OCSPROJECT</code> is defined, it must point to a file which
contains the project definitions. See <code>examples/Customize</code>
for examples of project definitions files.

<hr>
<address><a href="mailto:opal@cs.tu-berlin.de">The Opal Group</a></address>
<!-- Created: Fri Oct 10 21:50:37 MET DST 1997 -->
<!-- hhmts start -->
Last modified: Tue Nov 25 16:04:12 1997
<!-- hhmts end -->

</body>
</html>
